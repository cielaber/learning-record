# 计算机网络

![image-20250609161951682](.\images\image-20250609161951682.png)

## TCP/IP协议簇

![image-20250609162314695](.\images\image-20250609162314695.png)

![image-20250609163334220](.\images\image-20250609163334220.png)

![image-20250609163413614](.\images\image-20250609163413614.png)

**例题**

![image-20250609163756686](.\images\image-20250609163756686.png)

答案：C

前向纠错（FEC）是一种错误控制技术，发送端在数据中添加冗余信息，使接收端能够检测并纠正错误，而无需请求重传。

数据报系统（如IP网络）是无连接的，每个数据包独立路由，没有预先建立的路径。虚通路（virtual circuit）是面向连接的系统（如ATM或帧中继）的特征，在数据传输前建立固定路径，但数据报系统不提供此功能。

## DNS协议应用

![image-20250609164815505](.\images\image-20250609164815505.png)

![image-20250609170300039](.\images\image-20250609170300039.png)

**主域名服务器**

主域名服务器接收到的请求通常来源于递归 DNS 服务器，当递归 DNS 服务器在查询链中最终定位到目标域名的 权威服务器（主/辅域名服务器） 时，会直接向其发起请求。

![deepseek_mermaid_20250609_50712b](D:\下载\deepseek_mermaid_20250609_50712b.png)

当主域名服务器收到查询请求（如 `www.example.com`)时，按以下顺序处理：

| **步骤**                    | **处理动作**                        | **说明**                                                     |
| :-------------------------- | :---------------------------------- | :----------------------------------------------------------- |
| **1. 查询本地缓存记录**     | 检查近期解析结果缓存                | 若缓存中有有效记录（未过期），直接返回结果，避免重复查询。   |
| **2. 查询区域记录**         | 检索自身管理的域名配置（Zone File） | 若请求的域名属于其管辖范围（如 `example.com`），返回对应的解析记录（如IP地址）。 |
| **3. 转发至转发域名服务器** | 将请求转发给上游服务器（若配置）    | 若自身无记录且配置了转发器（Forwarder），则转交给其他DNS服务器（如ISP的递归DNS）。 |
| **4. 查询根域名服务器**     | 从根域（`.`）开始逐级查询           | 若前两步未解决，向根服务器获取顶级域（如 `.com`）的地址，再逐级向顶级域、权限域查询，直至获得最终结 |

**例题**

![image-20250609170219718](.\images\image-20250609170219718.png)

答案：A

![image-20250609170600029](.\images\image-20250609170600029.png)

答案：C

## DHCP协议应用

![image-20250609175905685](.\images\image-20250609175905685.png)

当DHCP获取地址异常时可能会获取到无效地址，在windows中地址段为169.254.X.X，Linux中则为0.0.0.0。

**例题**

![image-20250609180813069](.\images\image-20250609180813069.png)

答案：A

在一个网络中，可以部署多台DHCP服务器以提高冗余性和负载均衡。客户端通过广播方式发送DHCPDISCOVER消息，所有DHCP服务器均可响应。客户端通常接受第一个收到的DHCPOFFER，但多台服务器共存是允许且常见的（例如，通过划分地址池或使用DHCP故障转移机制避免冲突）。

DHCP客户端在初始启动时不知道DHCP服务器的地址，因此会发送广播消息（DHCPDISCOVER）来主动发现服务器。服务器响应后，客户端才得知其地址。客户端无需（也无法）预先指定服务器地址。

DHCP客户端不会主动选择IP地址，地址分配完全由DHCP服务器控制。

在大多数操作系统中（如Windows Server、Linux的`isc-dhcp-server`），DHCP服务默认是禁用的。管理员必须手动安装、配置并启动服务（例如，在Windows中需添加角色，在Linux中需编辑`dhcpd.conf`并启用服务）。

## 网络规划与设计

网络规划与设计的五个阶段：

- 需求分析
- 通信规范分析
- 逻辑网络分析
- 物理网络分析
- 实施阶段

### 需求分析

确定需求，包括：业务需求，用户需求，应用需求，计算机平台需求，网络通信需求等。

产物：需求规范

### 通信规范分析

对现有的网络体系进行分析，估计和测量通信量及设备利用率。

产物：通信规范

### 逻辑网络设计

逻辑网络设计是体现网络设计核心思想的关键阶段，在这一阶段根据需求规范和通信规范，选择一种比较适宜的网络逻辑结构，并基于该逻辑结构实施后续的资源分配规划，安全规划等内容。

产物：逻辑设计文档

利用需求分析和现有网络体系分析的结果来设计逻辑网络结构，最后得到一份逻辑网络设计文档。

逻辑网络设计工作内容：

- 网络结构的设计
- 物理层技术的选择
- 局域网技术的选择与应用
- 广域网技术的选择与应用
- 地址设计和命名模型
- 路由选择协议
- 网络管理
- 网络安全
- 逻辑网络设计文档

逻辑网络设计文档的输出内容包括以下：

- 逻辑网络设计图
- IP地址方案
- 安全管理方案
- 具体的软/硬件、广域网连接设备和基本的网络服务（这里只是规划网络层次以及各个层次选择什么样的设备，但不设计具体的设备选型。）
- 招聘和培训网络员工的具体说明
- 对软/硬件费用、服务提供费用、员工和培训的费用初步估计

### 物理网络设计

物理网络设计是对逻辑网络设计的物理实现，通过对设备的具体物理分析，运行环境等确定，确保网络的物理连接符合逻辑连接的要求。在这一阶段，网络设计者需要确定具体的软/硬件、连接设备、布线和服务的部署方案。

产物：物理结构设计文档

物理结构设计文档的输出内容包括以下：

- 网络物理结构图和布线方案
- 设备和部件得详细列表清单
- 软硬件和安装费用得估算
- 安装日程表，详细说明服务得时间以及期限
- 安装后的测试计划
- 用户的培训计划

### 实施阶段

实现物理网络设计，安装和维护。

**例题**

![image-20250609183126299](.\images\image-20250609183126299.png)

答案：A

![image-20250609183206278](.\images\image-20250609183206278.png)

答案：A

![image-20250609183911480](.\images\image-20250609183911480.png)

答案：A

![image-20250609184034357](.\images\image-20250609184034357.png)

答案：D

## 层次化网络设计

![image-20250610211047927](./images/image-20250610211047927.png)

**核心层**

主要是高速数据交换，实现高速数据传输、出口路由，而且由于比较重要，为了提高可靠性，通常需要冗余机制。

**汇聚层**

网络访问策略控制、数据包处理和过滤、策略路由、广播域定义、寻址。

**接入层**

主要是针对用户端，实现用户接入、计费管理、MAC地址认证、MAC地址过滤、收集用户信息，早期实现中可能 使用集线器代替交换机。

**例题**

![image-20250610212648416](./images/image-20250610212648416.png)

答案：A

![image-20250610212800599](./images/image-20250610212800599.png)

答案：C

## 网络冗余设计

在网络冗余设计中，对于通信路线常见的设计目标主要有两个：

- 备用路径
- 负载分担

### 备用路径

备用路径，提高可用性，由路由器、交换机等设备之间的独立备用链路构成，一般情况下备用路径仅仅在主路径失效时投入使用。设计时主要考虑：

- 备用路径的带宽
- 切换时间
- 非对称
- 自动切换
- 测试

### 负载分担

是对备用路径方式的扩充，通过并行链路提供流量分担（冗余的形式）来提高性能，主要的实现方式是利用两个或多个网络接口和路径来同时传递流量，设计时注意考虑：

- 网络中存在备用路径、备用链路时，可以考虑加入负载分担设计。
- 对于主路径、备用路径都相同的情况下，可以对实施负载分担的特例-负载均衡。
- 对于主路径、备用路径在不同的情况，可以采用策略路由机制，让一部分应用的流量分摊到备用路径上。

**例题**

![image-20250612222428220](./images/image-20250612222428220.png)

答案：B

## 网络存储技术

![image-20250619174337774](.\images\image-20250619174337774.png)

![image-20250619174434137](.\images\image-20250619174434137.png)

**例题**

![image-20250619174550862](.\images\image-20250619174550862.png)

答案：C

## 磁盘阵列RAID

RAID （ Redundant Array of Independent Disks ）即独立磁盘冗余阵列，简称为「磁盘阵列」，其实就是用多个独立的磁盘组成在一起形成一个大的磁盘系统，从而实现比单块磁盘更好的存储性能和更高的可靠性。

![image-20250619180604279](.\images\image-20250619180604279.png)

### RAID0

RAID0 是一种非常简单的的方式，它将多块磁盘组合在一起形成一个大容量的存储。当我们要写数据的时候，会将数据分为N份，以独立的方式实现N块磁盘的读写，那么这N份数据会同时并发的写到磁盘中，因此执行性能非常的高。

RAID0 的读写性能理论上是单块磁盘的N倍（仅限理论，因为实际中磁盘的寻址时间也是性能占用的大头）。

但RAID0的问题是，它并不提供数据校验或冗余备份，因此一旦某块磁盘损坏了，数据就直接丢失，无法恢复了。因此RAID0就不可能用于高要求的业务中，但可以用在对可靠性要求不高，对读写性能要求高的场景中。

![image-20250619181723483](.\images\image-20250619181723483.png)

### RAID1

RAID1 是磁盘阵列中单位成本最高的一种方式。因为它的原理是在往磁盘写数据的时候，将同一份数据无差别的写两份到磁盘，分别写到工作磁盘和镜像磁盘，那么它的实际空间使用率只有50%了，两块磁盘当做一块用，这是一种比较昂贵的方案。

RAID1其实与RAID0效果刚好相反。RAID1 这种写双份的做法，就给数据做了一个冗余备份。这样的话，任何一块磁盘损坏了，都可以再基于另外一块磁盘去恢复数据，数据的可靠性非常强，但性能就没那么好了。

![image-20250619181556526](.\images\image-20250619181556526.png)

### RAID3

将数据按照RAID0的形式，分成多份同时写入多块磁盘，但是还会另外再留出一块磁盘用于写「奇偶校验码」。例如总共有N块磁盘，那么就会让其中额度N-1块用来并发的写数据，第N块磁盘用记录校验码数据。一旦某一块磁盘坏掉了，就可以利用其它的N-1块磁盘去恢复数据。

但是由于第N块磁盘是校验码磁盘，因此有任何数据的写入都会要去更新这块磁盘，导致这块磁盘的读写是最频繁的，也就非常的容易损坏。

### RAID5

RAID5的方式对RAID3进行了改进。

![image-20250619181526361](.\images\image-20250619181526361.png)

RAID5模式中，不再需要用单独的磁盘写校验码。它把校验码信息分布到各个磁盘上。例如，总共有N块磁盘，那么会将要写入的数据分成N份，并发的写入到N块磁盘中，同时还将数据的校验码信息也写入到这N块磁盘中（数据与对应的校验码信息必须得分开存储在不同的磁盘上）。一旦某一块磁盘损坏了，就可以用剩下的数据和对应的奇偶校验码信息去恢复损坏的数据。

RAID5的方式，最少需要三块磁盘来组建磁盘阵列，允许最多同时坏一块磁盘。如果有两块磁盘同时损坏了，那数据就无法恢复。

### RAID6

为了进一步提高存储的高可用，又提出了RAID6方案，可以在有两块磁盘同时损坏的情况下，也能保障数据可恢复。

RAID6在RAID5的基础上再次改进，引入了双重校验的概念。RAID6除了每块磁盘上都有同级数据XOR校验区以外，还有针对每个数据块的XOR校验区，这样的话，相当于每个数据块有两个校验保护措施，因此数据的冗余性更高了。

但是RAID6的这种设计也带来了很高的复杂度，虽然数据冗余性好，读取的效率也比较高，但是写数据的性能就很差。因此RAID6在实际环境中应用的比较少。

### RAID10

RAID10其实是RAID1与RAID0的合体。

![image-20250619181456994](.\images\image-20250619181456994.png)

RAID10兼备了RAID1和RAID0的有优点。首先基于RAID1模式将磁盘分为2份，当要写入数据的时候，将所有的数据在两份磁盘上同时写入，相当于写了双份数据，起到了数据保障的作用。且在每一份磁盘上又会基于RAID0技术讲数据分为N份并发的读写，这样也保障了数据的效率。

但也可以看出RAID10模式是有一半的磁盘空间用于存储冗余数据的，浪费的很严重，因此用的也不是很多。

**例题**

![image-20250619181857195](.\images\image-20250619181857195.png)

答案：B、B

如果某个阵列中，存在磁盘容量大小不一致，则所有磁盘块容量都以最小盘的容量算。