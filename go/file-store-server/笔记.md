### mysql主从配置

1. docker起两个mysql

   ```bash
   docker run -p 3307:3306 --name docker_mysql_master -e MYSQL_ROOT_PASSWORD=root mysql
   
   docker run -p 3308:3306 --name docker_mysql_slave -e MYSQL_ROOT_PASSWORD=root mysql
   ```

2. 登录mysql

   ```bash
   mysql -uroot -h127.0.0.1 -P3307  -p
   
   mysql -uroot -h127.0.0.1 -P3308  -p
   ```

3. master实例创建用户，并授予权限。

   ```bash
   CREATE USER 'slave_reader'@'192.168.1.9' IDENTIFIED WITH mysql_native_password BY 'slave_reader';
   
   GRANT ALL PRIVILEGES ON *.* TO 'slave_reader'@'192.168.1.9';
   
   FLUSH PRIVILEGES;
   
   SELECT user, host FROM mysql.user;
   ```

4. naster实例查看log position

   ```bash
   show master status;
   ```

5. slave设置主从关系，并开始同步。

```bash
CHANGE MASTER TO MASTER_HOST='192.168.1.9',MASTER_PORT=3307,MASTER_USER='slave_reader',MASTER_PASSWORD='slave_reader',MASTER_LOG_FILE='binlog.000008',MASTER_LOG_POS=1947;

start slave;

show slave status\G;
```

